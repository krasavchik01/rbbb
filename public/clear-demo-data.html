<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–û—á–∏—Å—Ç–∫–∞ –¥–µ–º–æ-–¥–∞–Ω–Ω—ã—Ö - RB Partners</title>
    <style>
        body {
            font-family: system-ui, -apple-system, sans-serif;
            max-width: 600px;
            margin: 50px auto;
            padding: 20px;
            background: #0a0a0a;
            color: #fff;
        }
        .card {
            background: #1a1a1a;
            border: 1px solid #333;
            border-radius: 12px;
            padding: 30px;
            margin-bottom: 20px;
        }
        button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            width: 100%;
            margin-top: 10px;
        }
        button:hover {
            opacity: 0.9;
        }
        .danger {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
        }
        .success {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
        }
        h1 {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        .info {
            background: #2a2a2a;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            border-left: 3px solid #667eea;
        }
        .warning {
            border-left-color: #f5576c;
        }
        pre {
            background: #0a0a0a;
            padding: 10px;
            border-radius: 6px;
            overflow-x: auto;
        }
    </style>
</head>
<body>
    <div class="card">
        <h1>üßπ –û—á–∏—Å—Ç–∫–∞ –¥–µ–º–æ-–¥–∞–Ω–Ω—ã—Ö</h1>
        <p>–≠—Ç–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —É–¥–∞–ª–∏—Ç –í–°–ï –¥–µ–º–æ-–¥–∞–Ω–Ω—ã–µ –∏–∑ localStorage –∏ –æ—Å—Ç–∞–≤–∏—Ç —Ç–æ–ª—å–∫–æ —Ä–µ–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ.</p>
        
        <div class="info warning">
            <strong>‚ö†Ô∏è –í–ù–ò–ú–ê–ù–ò–ï!</strong><br>
            –≠—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ –Ω–µ–æ–±—Ä–∞—Ç–∏–º–æ. –ë—É–¥—É—Ç —É–¥–∞–ª–µ–Ω—ã –≤—Å–µ –¥–µ–º–æ-–ø—Ä–æ–µ–∫—Ç—ã, –¥–µ–º–æ-—Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∏ –∏ —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ.
        </div>

        <div id="status" class="info" style="display: none;"></div>

        <button class="danger" onclick="clearAllDemoData()">üóëÔ∏è –û—á–∏—Å—Ç–∏—Ç—å –í–°–ï –¥–µ–º–æ-–¥–∞–Ω–Ω—ã–µ</button>
        <button class="success" onclick="window.location.href='/'">‚Üê –í–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞ –≥–ª–∞–≤–Ω—É—é</button>
    </div>

    <div class="card">
        <h2>üìä –¢–µ–∫—É—â–∏–µ –¥–∞–Ω–Ω—ã–µ –≤ localStorage:</h2>
        <pre id="current-data">–ó–∞–≥—Ä—É–∑–∫–∞...</pre>
        <button onclick="showCurrentData()">üîÑ –û–±–Ω–æ–≤–∏—Ç—å</button>
    </div>

    <script>
        function showCurrentData() {
            const data = {};
            for (let key in localStorage) {
                if (localStorage.hasOwnProperty(key) && key.startsWith('rb_')) {
                    try {
                        const value = JSON.parse(localStorage.getItem(key));
                        if (Array.isArray(value)) {
                            data[key] = `${value.length} –∑–∞–ø–∏—Å–µ–π`;
                        } else {
                            data[key] = typeof value;
                        }
                    } catch {
                        data[key] = 'Invalid JSON';
                    }
                }
            }
            document.getElementById('current-data').textContent = JSON.stringify(data, null, 2);
        }

        function clearAllDemoData() {
            const confirmed = confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã? –≠—Ç–æ —É–¥–∞–ª–∏—Ç –í–°–ï –¥–∞–Ω–Ω—ã–µ –∏–∑ localStorage!');
            if (!confirmed) return;

            const statusEl = document.getElementById('status');
            statusEl.style.display = 'block';
            statusEl.innerHTML = '<strong>üîÑ –û—á–∏—Å—Ç–∫–∞...</strong>';

            // –£–¥–∞–ª—è–µ–º –í–°–ï –∫–ª—é—á–∏, —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å RB
            const keysToRemove = [];
            for (let key in localStorage) {
                if (key.startsWith('rb_') || key.includes('project') || key.includes('employee')) {
                    keysToRemove.push(key);
                }
            }

            keysToRemove.forEach(key => {
                localStorage.removeItem(key);
                console.log('–£–¥–∞–ª—ë–Ω –∫–ª—é—á:', key);
            });

            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –ø—É—Å—Ç—ã–µ –º–∞—Å—Å–∏–≤—ã –¥–ª—è —Ä–µ–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
            localStorage.setItem('rb_projects_v3', JSON.stringify([]));
            localStorage.setItem('rb_employees', JSON.stringify([]));
            localStorage.setItem('rb_notifications', JSON.stringify([]));

            statusEl.innerHTML = `
                <strong>‚úÖ –û—á–∏—Å—Ç–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞!</strong><br>
                –£–¥–∞–ª–µ–Ω–æ –∫–ª—é—á–µ–π: ${keysToRemove.length}<br>
                <br>
                –¢–µ–ø–µ—Ä—å –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É –∏ –∑–∞–π–¥–∏—Ç–µ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–Ω–æ–≤–æ.
            `;
            statusEl.classList.add('success');

            showCurrentData();

            setTimeout(() => {
                window.location.href = '/';
            }, 3000);
        }

        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –¥–∞–Ω–Ω—ã–µ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        showCurrentData();
    </script>
</body>
</html>

